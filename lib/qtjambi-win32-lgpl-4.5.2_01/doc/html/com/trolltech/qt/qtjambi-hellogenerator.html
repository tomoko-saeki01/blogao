<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>Hello Generator</title><link href="classic.css" rel="stylesheet" type="text/css" />
</head><table border="0" cellpadding="0" cellspacing="0" width="100%">
 <tr>
 <td align="left" valign="top" width="32"> <img src="images/qt-logo.png" align="left" width="32" height="32" border="0" /> </td>
 <td width="1">&nbsp;&nbsp;</td> <td class="postheader" valign="center"> <a href="qtjambi-index.html"> <font color="#004faf">Home</font></a>&nbsp;&middot; <a href="qtjambi-examples.html"> <font color="#004faf">Examples</font></a>&nbsp; </td>
 </tr></table><body><p><hr><p><center><h1>Hello Generator</h1></center><p> We start of with the classic "Hello World" program - except we call it "Hello Generator". We have one class with one function: <tt>hello()</tt>. All the <tt>hello()</tt> function does is creating and showing a <a href="../../../com/trolltech/qt/gui/QPushButton.html">QPushButton</a>.<br><pre class="snippet">
Missing snippet: hellogenerator.h.</pre><br></pre> What we need to do is tell the generator to map the class <tt>HelloGenerator</tt> and the <tt>hello()</tt> function to Java. We do this by writing a type system specification, which is a handwritten XML document describing the types that will be made available in the generated Java API. <p>We start the specification by giving the package name and default super class of our Java objects.<pre>&lt;typesystem package="com.trolltech.examples.hellogenerator" default-superclass="com.trolltech.qt.QtJambiObject"&gt;</pre> The typesystem node is the root node and contains all type system information. <p>Any objects without a superclass will extend the default superclass. Note that currently, all typesystems must have QtJambiObject as their default superclass. A typesystem specification can only describe one package. You need one typesystem specification for each package you wish to create. <p>We then tell the generator that we want to map the HelloGenerator class.<pre>&lt;object-type name="HelloGenerator" /&gt;</pre> The generator will now find and map the <tt>hello()</tt> function automatically. C++ classes are mapped to Java either as <tt>object-type</tt>s or <tt>value-types</tt>s, depending on whether they are object or value types in C++. We will take a closer look at this later in the tutorial. <p>We are now ready to run the generator. The generator takes the type system specification and a header file as input. The header file should include all classes we wish to map. Since we only have one class, we simply use its header file. <p>Assuming that the generator executable is in your path, you can then run the generator:<pre>generator hellogenerator.h typesystem_hellogenerator.txt</pre> The generator will then create both the Java and C++ files. The Java files will be located in the package specified, and the C++ files in the folder cpp/com_trolltech_examples_generatortutorial. <p>Now we need to compile the C++ sources. We need to write a qmake <tt>.pro</tt> file for this. We print the file in its entirety here.<pre>TARGET = com_trolltech_examples_generatortutorial

include($JAMBI_HOME/qtjambi/qtjambi_include.pri)
include(./cpp/com_trolltech_examples_generatortutorial/com_trolltech_examples_generatortutorial.pri)

HEADERS += hellogenerator.h

SOURCES += hellogenerator.cpp</pre> The qtjambi_include.pri needs to be included because it contains functionality used for the mappings. We also need to include the <tt>.pri</tt> file for our own library; this file is generated automatically by the generator. Then, you can simply run <tt>qmake</tt> and <tt>make</tt>:<pre>qmake hellogenerator.pro
make</pre> Note that you might need to run <tt>qmake</tt> with the <tt>-config release</tt> argument if Qt was built with debug support. <p>After compiling the C++ sources, you also need to compile the Java sources with <tt>javac</tt>.<pre>javac com/trolltech/examples/generatortutorial/HelloGenerator.java</pre> Congratulations! Your first Java to C++ bindings using the Qt Jambi Generator are ready for action. You only need to make sure that the C++ library is in your library path. The finished library is placed in the <tt>../lib</tt> folder from the examples directory. To make it easy, you can simply put the library in the <tt>lib</tt> folder under the Jambi home directory, or add it to the Jambi platform JAR archive (see the <a href="installation.html">installation guide</a> for details).<p /><address><hr /><div align="center">
 <table width="100%" cellspacing="0" border="0"><tr class="address">
 <td width="30%">Copyright &copy; 2009 Nokia Corporation and/or its subsidiary(-ies)</td>
 <td width="40%" align="center"><a href="trademarks.html">Trademarks</a></td>
 <td width="30%" align="right"><div align="right">Qt Jambi 4.5.2_01</div></td>
 </tr></table></div></address></body></html>
