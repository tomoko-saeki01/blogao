<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>Installing Qt Jambi</title><link href="classic.css" rel="stylesheet" type="text/css" />
</head><table border="0" cellpadding="0" cellspacing="0" width="100%">
 <tr>
 <td align="left" valign="top" width="32"> <img src="images/qt-logo.png" align="left" width="32" height="32" border="0" /> </td>
 <td width="1">&nbsp;&nbsp;</td> <td class="postheader" valign="center"> <a href="qtjambi-index.html"> <font color="#004faf">Home</font></a>&nbsp;&middot; <a href="qtjambi-examples.html"> <font color="#004faf">Examples</font></a>&nbsp; </td>
 </tr></table><body><p><hr><p><center><h1>Installing Qt Jambi</h1></center><p> Qt Jambi is available both in prebuilt and source packages for Linux, Mac OS X, and Windows. Java 1.5 or later is required to install Qt Jambi. <p>The procedure of installing is different depending on whether you have downloaded a source or prebuilt package. This installation guide has separate sections for each approach. <p>Enjoy ! <ul><li> <a href="#installing-from-a-prebuilt-package">Installing from a Prebuilt Package</a></li> <ul><li> <a href="#manually-launching-qt-jambi-applications">Manually Launching Qt Jambi Applications</a></li> <ul><li> <a href="#alternate-way-of-loading-native-libraries">Alternate way of loading native libraries</a></li></ul></ul><li> <a href="#building-qt-jambi-from-a-source-package">Building Qt Jambi from a Source Package</a></li> <ul><li> <a href="#configuring-the-system-for-qt-jambi">Configuring the System for Qt Jambi</a></li><li> <a href="#building-qt-for-qt-jambi">Building Qt for Qt Jambi</a></li><li> <a href="#setting-up-the-environment">Setting up the environment</a></li><li> <a href="#building-qt-jambi">Building Qt Jambi</a></li><li> <a href="#trouble-shooting">Trouble Shooting</a></li> <ul><li> <a href="#common-problems">Common Problems</a></li><li> <a href="#load-issues">Load Issues</a></li></ul></ul><li> <a href="#platform-notes">Platform Notes</a></li><li> <a href="#running-the-qt-designer">Running the Qt Designer</a></li><li> <a href="#running-the-qt-jambi-generator">Running the Qt Jambi Generator</a></li></ul><a name="installing-from-a-prebuilt-package"><h2>Installing from a Prebuilt Package</h2> After extracting the package, you are ready to run the Launcher, which is an application that runs the examples and demos that come with Qt Jambi. <p>To run the examples and demo launcher on Windows run:<pre>qtjambi.exe</pre> On Linux and Mac OS X run:<pre>qtjambi.sh</pre> Running these files will verify the virtual machine version and set the correct environment for running Qt Jambi applications. <p>When you are ready to distribute your own applications, see the <a href="qtjambi-deployment.html">deployment</a> document.<a name="manually-launching-qt-jambi-applications"><h3>Manually Launching Qt Jambi Applications</h3> To manually launch applications, you need to include the following <tt>.jar</tt> files in your classpath: <ul><li> <tt>qtjambi-4.4.0_01.jar</tt>, which contains the Jambi classes.</li><li> The platform archive, which contains the native libraries used by Qt Jambi. The archive is named after the operating system and compiler used to build the libraries; for instance, <tt>qtjambi-win32-msvc2005-4.4.0_01.jar</tt> for Windows and MSVC 2005.</li><li> To run the examples or launcher, the classpath must also include the <tt>qtjambi-examples-4.4.0_01.jar</tt>.</li></ul> All three files live in the in the Qt Jambi installation directory. We give an example for each operating system bellow:<pre>// Linux
java -cp qtjambi-4.4.0_01.jar:qtjambi-linux32-gcc-4.4.0_01.jar:qtjambi-examples-4.4.0_01.jar com.trolltech.launcher.Launcher

// Mac OS X
java -XstartOnFirstThread -cp qtjambi-4.4.0_01.jar:qtjambi-macosx-gcc-4.4.0_01.jar:qtjambi-examples-4.4.0_01.jar com.trolltech.launcher.Launcher

// Windows
java -cp qtjambi-4.4.0_01.jar;qtjambi-win32-msvc2005-4.4.0_01.jar;qtjambi-examples-4.4.0_01.jar com.trolltech.launcher.Launcher</pre> <b>Note:</b> When running a Qt Jambi application on Mac, it is necessary to pass the <tt>-XstartOnFirstThread</tt> argument to the Java executable.<a name="alternate-way-of-loading-native-libraries"><h4>Alternate way of loading native libraries</h4> As described in the previous section, Jambi loads the native libraries from the platform archive (when it is included in the classpath). <p>An alternative way of loading the native libraries is to rely on Java's standard method of loading native libraries. This is done by specifying either the JVM system property <tt>-Djava.library.path=[path_to_libraries]</tt> or including the paths in the following environment variable: <table align="center" border="0" cellpadding="2" cellspacing="1" width="100%"><thead><tr class="qt-style" valign="top"><th><center> Platform</center></th><th><center> Comment</center></th></tr></thead><tr valign="top" class="even"><td> Windows</td><td> Set the <tt>PATH</tt> environment variable to include the bin directory in the Qt Jambi directory.</td></tr><tr valign="top" class="odd"><td> Linux</td><td> Set the <tt>LD_LIBRARY_PATH</tt> environment variable to include the lib directory in the Qt Jambi directory.</td></tr><tr valign="top" class="even"><td> Mac OS X</td><td> Set the <tt>DYLD_LIBRARY_PATH</tt> environment variable to include the lib directory in the Qt Jambi directory.</td></tr></table> Note that the path to the Jambi libraries should be the first path in these variables. If not, Jambi might find other and likely incompatible versions of the libraries. On Linux, for instance, the library libQtCore.4.so in /usr/lib is by default part of LD_LIBRARY_PATH. <p>Some of Qt's functionality is loaded via native <a href="plugins-howto.html">plugins</a>. This includes for instance support for JPEG images. The plugins are located in the <tt>plugins</tt> directory in the Qt Jambi installation directory. <p>Qt Jambi searches for the plugins from the directories in the QT_PLUGIN_PATH environment variable (when the platform archive is not used). So you should set QT_PLUGIN_PATH to the <tt>plugins</tt> directory. <p>You are then ready to run Qt Jambi applications. An example of how to run the launcher manually is illustrated below:<pre>java -cp qtjambi-4.4.0_01.jar:qtjambi-examples-4.4.0_01.jar com.trolltech.launcher.Launcher</pre><a name="building-qt-jambi-from-a-source-package"><h2>Building Qt Jambi from a Source Package</h2> This section describes how to build Qt Jambi from source. We first explain how to configure your system, and then we go through the procedure of building Qt Jambi from the command line. Finally, we look at some common installation problems. <p>Note that a Qt Jambi source package also requires a Qt source package. To avoid potential binary incompatibilities, it is highly recommended that you rebuild Qt before building Qt Jambi. On Mac OS X, Qt must be configured without frameworks (by running the <tt>configure</tt> script with the --no-framework option).<a name="configuring-the-system-for-qt-jambi"><h3>Configuring the System for Qt Jambi</h3> In addition to the Qt source package, you will need JDK 1.5 or higher and the build utility <tt>ant</tt>.<a name="building-qt-for-qt-jambi"><h3>Building Qt for Qt Jambi</h3> The first step is to build Qt for Qt Jambi. A normal Qt build will normally work, but there are a few exceptions. For more details on building Qt on any given system see the Qt installation guides. <table align="center" border="0" cellpadding="2" cellspacing="1" width="80%"><thead><tr class="qt-style" valign="top"><th><center> Configuration</center></th><th><center> Comment</center></th></tr></thead><tr valign="top" class="even"><td> All</td><td> Some features in Qt are turned on or off for Qt Jambi by configuring with <tt>-D QT_JAMBI_BUILD</tt>. Qt Jambi also has no need for the Qt 3 support library so it is recommended to compile with <tt>-no-qt3support</tt>.</td></tr><tr valign="top" class="odd"><td> Mac OS X</td><td> Qt Jambi only supports Qt configured with <tt>-no-framework</tt> and because of compatibility it is recommended to configure Qt against the 10.4 SDK, <tt>-sdk /Developer/SDKs/MacOSX10.4u.sdk</tt></td></tr><tr valign="top" class="even"><td> Linux</td><td> Sun's Java Virtual Machine has a bug preventing it from using MMX and SSE instructions. For deployment against 1.5 Java runtimes, configure Qt with the options <tt>-no-mmx -no-sse -no-sse2 -no-3dnow</tt> to avoid problems. In addition, because Qt Jambi requires both the Qt headers and the libraries to be located relative to QTDIR, Qt should be configured with <tt>-prefix $PWD</tt>, hence not installed.</td></tr><tr valign="top" class="odd"><td> Windows (MSVC 2005 or newer)</td><td> <tt>-plugin-manifests</tt> is required for plugins to load properly.</td></tr></table><a name="setting-up-the-environment"><h3>Setting up the environment</h3> The following table describes the environment variables necessary to install Qt Jambi. <table align="center" border="0" cellpadding="2" cellspacing="1" width="80% \header \o Variable \o Value"><tr valign="top" class="even"><td> QTDIR</td><td> This variable must contain the path to the directory where Qt is installed.</td></tr><tr valign="top" class="odd"><td> JAVA_HOME</td><td> This variable must contain the path to the directory where Java is installed.</td></tr></table><a name="building-qt-jambi"><h3>Building Qt Jambi</h3> Qt Jambi provides an ant task which handles all the tasks of building the Qt Jambi libraries. To build Qt Jambi from scratch, run ant without arguments in the Jambi installation directory.<pre>&gt; ant</pre> in the Qt Jambi directory. Please note that Qt Jambi requires the <tt>ant-trax</tt> module of <tt>ant</tt> which is optional in some linux distributions. Running <tt>ant</tt> will automatically go through the following = steps: <ul><li> Compile the Qt Jambi Generator</li><li> Generate the Qt Jambi libraries based on the Qt specified by $QTDIR</li><li> Compile the Juic tool</li><li> Compile the and bundle the native libraries</li><li> Compile and bundle the class libraries</li><li> Run Juic over the examples.</li><li> Compile and bundle the examples</li></ul> For a description of the various sub-targets of the ant build one can:<pre>&gt; ant -projecthelp</pre> For a description of the various build configurations, one can do:<pre>&gt; ant help</pre><a name="trouble-shooting"><h3>Trouble Shooting</h3> If you have trouble compiling and running Qt Jambi, we present problems that are commonly encountered in a table. This should be sufficient to solve most problems; failing that, try asking someone. The Jambi FAQ is a good place to start. In the Jambi Mailing List, active Jambi users and the Jambi development team can be helpful with installation problems; please run Qt Jambi with the <tt>com.trolltech.qt.verbose-loading</tt><a href="qtjambi-systemproperties.html">system property</a> and give stack traces if Qt Jambi fails to load native libraries.<a name="common-problems"><h4>Common Problems</h4> In this section, we have tried to gather common problems encountered while building Qt Jambi. They are listed in a table with columns for the problem description and solution. <table align="center" border="0" cellpadding="2" cellspacing="1" width="80%"><thead><tr class="qt-style" valign="top"><th><center> Problem</center></th><th><center> Solution</center></th></tr></thead><tr valign="top" class="even"><td> On Linux the <tt>gcj</tt> (GNU Java Compiler) is located in <tt>/usr/bin</tt>; the path to the correct java version must be before this in the PATH. This usually results in <tt>java.lang.ClassFormatError</tt> errors.</td><td> Make sure that it is the correct java executable in the PATH.</td></tr><tr valign="top" class="odd"><td> Environment variables are not set correctly.</td><td> Check with the <a href="qtjambi-installation.html#configuring-the-system-for-qt-jambi">Configuring the System for Qt Jambi</a> section that your system is properly configured for Jambi.</td></tr><tr valign="top" class="even"><td> Qt Jambi uses the Qt Header files to generate the mapping from c++ to java. Unless Qt was built with default settings, you may get link problems for bindings that are not in the native libraries.</td><td> Build Qt with default settings</td></tr><tr valign="top" class="odd"><td> <tt>juic</tt> does not update .jui files that are not modified, which can be a problem if Java sources are deleted.</td><td> Run juic with the <tt>-a</tt> option.</td></tr><tr valign="top" class="even"><td> Qt Jambi expects that Qt was built with debugging turned off. If Qt was built with debugging, the libraries will not be found.</td><td> Run Qt Jambi with the <tt>com.trolltech.qt.debug</tt> system property.</td></tr><tr valign="top" class="odd"><td> Qt Jambi tries to use the wrong compiler</td><td> This can happen on Windows systems with both the MSVC and MinGW compilers installed.You can set the QMAKESPEC variable. Please see the qmake <a href="qmake-manual.html">documentation</a> for details.</td></tr></table><a name="load-issues"><h4>Load Issues</h4> If Jambi cannot find the native libraries, you will get <tt>java.lang.UnsatisfiedLinkError</tt>'s or other load issues. We list search paths below. They are listed in the order Jambi searches for libraries. <ul><li> The com.trolltech.qt.library-path system property.</li><li> The classpath (including jar files).</li><li> The subdirectory <tt>lib</tt> (Mac OS X and Linux) or <tt>bin</tt> (Windows) under the root of the Jambi package structure (i.e., the Qt Jambi installation directory).</li><li> The java.library.path system property, which is set to LD_LIBRARY_PATH on Linux, PATH on Windows, and DYLD_LIBRARY_PATH on Mac OS X.</li></ul><a name="platform-notes"><h2>Platform Notes</h2> We will now take a quick look at platform specific issues. <table align="center" border="0" cellpadding="2" cellspacing="1" width="100%"><thead><tr class="qt-style" valign="top"><th><center> Platform</center></th><th><center> Comment</center></th></tr></thead><tr valign="top" class="even"><td> Mac OS X</td><td> When running a Qt Jambi application, it is necessary to pass the <tt>-XstartOnFirstThread</tt> argument to the Java executable. Also, if you have a source package, you have to build Qt with the --no-framework option.</td></tr><tr valign="top" class="odd"><td> Linux / 64 bit:</td><td> Install a 32 bit virtual machine, e.g., on Ubuntu, install the <tt>ia32-sun-java5-bin</tt> package and put <tt>/usr/lib/jvm/ia32-java-1.5.0-sun-1.5.0.06/jre/bin</tt> into the <tt>PATH</tt> environment variable.</td></tr></table><a name="running-the-qt-designer"><h2>Running the Qt Designer</h2> The Qt Designer is a visual tool for designing and building user interfaces. If you have a prebuilt package, you can run it from the command line with the <tt>designer.bat</tt> or <tt>designer.sh</tt> scripts. The <a href="qtjambi-eclipse.html">Eclipse integration</a> handles the designer automatically. <p>You will find more information in the <a href="qtjambi-designer.html">Qt Designer document</a>.<a name="running-the-qt-jambi-generator"><h2>Running the Qt Jambi Generator</h2> The generator is a Qt application which can be used to map C++ based Qt APIs onto equivalent Java APIs. The Qt Jambi package provides an example on how to use the Qt Jambi Generator, located in the <tt>path/to/Qt Jambi/generator_example</tt> directory. <p>To build the generator example from the source package simply do:<pre>ant -f build_generator_example.xml</pre> <b>Warning:</b> The Qt Jambi generator is written to handle Qt based source code, and is not intended for mapping C++ libraries in general.<p /><address><hr /><div align="center">
 <table width="100%" cellspacing="0" border="0"><tr class="address">
 <td width="30%">Copyright &copy; 2009 Nokia Corporation and/or its subsidiary(-ies)</td>
 <td width="40%" align="center"><a href="trademarks.html">Trademarks</a></td>
 <td width="30%" align="right"><div align="right">Qt Jambi 4.5.2_01</div></td>
 </tr></table></div></address></body></html>
