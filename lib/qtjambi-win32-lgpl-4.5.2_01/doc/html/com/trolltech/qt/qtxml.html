<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>QtXml Module</title><link href="classic.css" rel="stylesheet" type="text/css" />
</head><table border="0" cellpadding="0" cellspacing="0" width="100%">
 <tr>
 <td align="left" valign="top" width="32"> <img src="images/qt-logo.png" align="left" width="32" height="32" border="0" /> </td>
 <td width="1">&nbsp;&nbsp;</td> <td class="postheader" valign="center"> <a href="qtjambi-index.html"> <font color="#004faf">Home</font></a>&nbsp;&middot; <a href="qtjambi-examples.html"> <font color="#004faf">Examples</font></a>&nbsp; </td>
 </tr></table><body><p><hr><p><center><h1>QtXml Module</h1></center><p>[Previous: <a href="qtsvg.html">QtSvg Module</a>][<a href="modules.html">Qt's Modules</a>][Next: <a href="qtxmlpatterns.html">QtXmlPatterns Module</a>]<p><h2>Classes</h2> <table align="center" border="0" cellpadding="2" cellspacing="1" width="100%"><tr valign="top" class="even"><td><a href="../../../com/trolltech/qt/xml/QDomAttr.html">QDomAttr</a></td><td></td></tr><tr valign="top" class="odd"><td><a href="../../../com/trolltech/qt/xml/QDomCDATASection.html">QDomCDATASection</a></td><td></td></tr><tr valign="top" class="even"><td><a href="../../../com/trolltech/qt/xml/QDomCharacterData.html">QDomCharacterData</a></td><td></td></tr><tr valign="top" class="odd"><td><a href="../../../com/trolltech/qt/xml/QDomComment.html">QDomComment</a></td><td></td></tr><tr valign="top" class="even"><td><a href="../../../com/trolltech/qt/xml/QDomDocument.html">QDomDocument</a></td><td></td></tr><tr valign="top" class="odd"><td><a href="../../../com/trolltech/qt/xml/QDomDocumentFragment.html">QDomDocumentFragment</a></td><td></td></tr><tr valign="top" class="even"><td><a href="../../../com/trolltech/qt/xml/QDomDocumentType.html">QDomDocumentType</a></td><td></td></tr><tr valign="top" class="odd"><td><a href="../../../com/trolltech/qt/xml/QDomElement.html">QDomElement</a></td><td></td></tr><tr valign="top" class="even"><td><a href="../../../com/trolltech/qt/xml/QDomEntity.html">QDomEntity</a></td><td></td></tr><tr valign="top" class="odd"><td><a href="../../../com/trolltech/qt/xml/QDomEntityReference.html">QDomEntityReference</a></td><td></td></tr><tr valign="top" class="even"><td><a href="../../../com/trolltech/qt/xml/QDomImplementation.html">QDomImplementation</a></td><td></td></tr><tr valign="top" class="odd"><td><a href="../../../com/trolltech/qt/xml/QDomNamedNodeMap.html">QDomNamedNodeMap</a></td><td></td></tr><tr valign="top" class="even"><td><a href="../../../com/trolltech/qt/xml/QDomNode.html">QDomNode</a></td><td></td></tr><tr valign="top" class="odd"><td><a href="../../../com/trolltech/qt/xml/QDomNodeList.html">QDomNodeList</a></td><td></td></tr><tr valign="top" class="even"><td><a href="../../../com/trolltech/qt/xml/QDomNotation.html">QDomNotation</a></td><td></td></tr><tr valign="top" class="odd"><td><a href="../../../com/trolltech/qt/xml/QDomProcessingInstruction.html">QDomProcessingInstruction</a></td><td></td></tr><tr valign="top" class="even"><td><a href="../../../com/trolltech/qt/xml/QDomText.html">QDomText</a></td><td></td></tr><tr valign="top" class="odd"><td><a href="../../../com/trolltech/qt/xml/QXmlAttributes.html">QXmlAttributes</a></td><td></td></tr><tr valign="top" class="even"><td><a href="../../../com/trolltech/qt/xml/QXmlContentHandler.html">QXmlContentHandler</a></td><td></td></tr><tr valign="top" class="odd"><td><a href="../../../com/trolltech/qt/xml/QXmlDTDHandler.html">QXmlDTDHandler</a></td><td></td></tr><tr valign="top" class="even"><td><a href="../../../com/trolltech/qt/xml/QXmlDeclHandler.html">QXmlDeclHandler</a></td><td></td></tr><tr valign="top" class="odd"><td><a href="../../../com/trolltech/qt/xml/QXmlDefaultHandler.html">QXmlDefaultHandler</a></td><td></td></tr><tr valign="top" class="even"><td><a href="../../../com/trolltech/qt/xml/QXmlEntityResolver.html">QXmlEntityResolver</a></td><td></td></tr><tr valign="top" class="odd"><td><a href="../../../com/trolltech/qt/xml/QXmlErrorHandler.html">QXmlErrorHandler</a></td><td></td></tr><tr valign="top" class="even"><td><a href="../../../com/trolltech/qt/xml/QXmlInputSource.html">QXmlInputSource</a></td><td></td></tr><tr valign="top" class="odd"><td><a href="../../../com/trolltech/qt/xml/QXmlLexicalHandler.html">QXmlLexicalHandler</a></td><td></td></tr><tr valign="top" class="even"><td><a href="../../../com/trolltech/qt/xml/QXmlLocator.html">QXmlLocator</a></td><td></td></tr><tr valign="top" class="odd"><td><a href="../../../com/trolltech/qt/xml/QXmlNamespaceSupport.html">QXmlNamespaceSupport</a></td><td></td></tr><tr valign="top" class="even"><td><a href="../../../com/trolltech/qt/xml/QXmlParseException.html">QXmlParseException</a></td><td></td></tr><tr valign="top" class="odd"><td><a href="../../../com/trolltech/qt/xml/QXmlReader.html">QXmlReader</a></td><td></td></tr><tr valign="top" class="even"><td><a href="../../../com/trolltech/qt/xml/QXmlSimpleReader.html">QXmlSimpleReader</a></td><td></td></tr><tr valign="top" class="odd"><td><a href="../../../com/trolltech/qt/xml/QXmlStreamWriter.html">QXmlStreamWriter</a></td><td></td></tr></table>The <a href="qtxml.html">QtXml</a> module provides a stream reader and writer for XML documents, and C++ implementations of SAX and DOM. SAX is an event-based standard interface for XML parsers. The Qt interface follows the design of the SAX2 Java implementation. Its naming scheme was adapted to fit the Qt naming conventions. Details on SAX2 can be found at http://www.saxproject.org. <p>Support for SAX2 filters and the reader factory are under development. The Qt implementation does not include the SAX1 compatibility classes present in the Java interface. For an introduction to Qt's SAX2 classes, see <a href="qtxml.html#the-qt-sax2-classes">The Qt SAX2 Classes</a>. <p>DOM Level 2 is a W3C Recommendation for XML interfaces that maps the constituents of an XML document to a tree structure. The specification of DOM Level 2 can be found at http://www.w3.org/DOM/. For more information about the DOM classes in Qt is provided, see <a href="qtxml.html#the-qt-dom-classes">The Qt DOM Classes</a>. <p>Since version 4.3, Qt provides two new classes for reading and writing XML: <a href="../../../com/trolltech/qt/xml/QXmlStreamReader.html">QXmlStreamReader</a> and <a href="../../../com/trolltech/qt/xml/QXmlStreamWriter.html">QXmlStreamWriter</a>. <p>In addition to core XML support, classes for higher level querying and manipulation of XML data, are provided by the <a href="qtxmlpatterns.html">QtXmlPatterns</a> module. In the <a href="qtsvg.html">QtSvg</a> module, the <a href="../../../com/trolltech/qt/svg/QSvgRenderer.html">QSvgRenderer</a> and <a href="../../../com/trolltech/qt/svg/QSvgGenerator.html">QSvgGenerator</a> classes can read and write a subset of SVG, an XML-based file format. Qt also provides helper functions that may be useful to those working with XML and XHTML: see Qt::escape() and Qt::convertFromPlainText(). <p>Further XML support is provided by the <a href="http://qtsoftware.com/products/appdev/add-on-products">Qt Solutions</a> group who provide, for example, classes that support SOAP and MML with the Qt XML classes. <p>This module is part of the <a href="commercialeditions.html">Qt Full Framework Edition</a> and the <a href="opensourceedition.html">Qt Open Source Edition</a>. <p>Topics: <ul><li> <a href="#configuring-the-build-process">Configuring the Build Process</a></li><li> <a href="#the-qtxml-stream-classes">The QtXml Stream Classes</a></li><li> <a href="#the-qt-sax2-classes">The Qt SAX2 Classes</a></li> <ul><li> <a href="#introduction-to-sax2">Introduction to SAX2</a></li><li> <a href="#sax2-features">SAX2 Features</a></li><li> <a href="#namespace-support-via-features">Namespace Support via Features</a></li> <ul><li> <a href="#summary">Summary</a></li></ul><li> <a href="#properties">Properties</a></li></ul><li> <a href="#the-qt-dom-classes">The Qt DOM Classes</a></li> <ul><li> <a href="#introduction-to-dom">Introduction to DOM</a></li></ul><li> <a href="#an-introduction-to-namespaces">An Introduction to Namespaces</a></li> <ul><li> <a href="#conventions-used-in-the-qt-xml-documentation">Conventions Used in the Qt XML Documentation</a></li></ul></ul><a name="configuring-the-build-process"><h2>Configuring the Build Process</h2> Applications that use Qt's XML classes need to be configured to be built against the <a href="qtxml.html">QtXml</a> module. The following declaration in a <tt>qmake</tt> project file ensures that an application is compiled and linked appropriately: <p>To include the definitions of the module's classes, use the following directive: <pre class="snippet">
#include &lt;QtXml&gt;
</pre> To link against the module, add this line to your <a href="qmake-manual.html">qmake</a><tt>.pro</tt> file: <pre class="snippet">
QT += xml
</pre> This line is necessary because only the <a href="qtcore.html">QtCore</a> and <a href="qtgui.html">QtGui</a> modules are used in the default build process.<a name="the-qtxml-stream-classes"><h2>The QtXml Stream Classes</h2> The <a href="../../../com/trolltech/qt/xml/QXmlStreamReader.html">QXmlStreamReader</a> and <a href="../../../com/trolltech/qt/xml/QXmlStreamWriter.html">QXmlStreamWriter</a> are two new classes provided in Qt 4.3 and later. A stream reader reports an XML document as a stream of tokens. This differs from SAX as SAX applications provide handlers to receive XML events from the parser whereas the <a href="../../../com/trolltech/qt/xml/QXmlStreamReader.html">QXmlStreamReader</a> drives the loop, pulling tokens from the reader when they are needed. This pulling approach makes it possible to build recursive descent parsers, allowing XML parsing code to be split into different methods or classes. <p><a href="../../../com/trolltech/qt/xml/QXmlStreamReader.html">QXmlStreamReader</a> is a well-formed XML 1.0 parser that excludes external parsed entities. Hence, data provided by the stream reader adheres to the W3C's criteria for well-formed XML, as long as no error occurs. Otherwise, functions such as <a href="../../../com/trolltech/qt/xml/QXmlStreamReader.html#atEnd()">atEnd()</a>, <a href="../../../com/trolltech/qt/xml/QXmlStreamReader.html#error()">error()</a> and <a href="../../../com/trolltech/qt/xml/QXmlStreamReader.html#hasError()">hasError()</a> can be used to check and view the errors. <p>An example of <a href="../../../com/trolltech/qt/xml/QXmlStreamReader.html">QXmlStreamReader</a> implementation would be the <tt>XbelReader</tt> in <a href="xml-streambookmarks.html">QXmlStream Bookmarks Example</a>, which is a subclass of <a href="../../../com/trolltech/qt/xml/QXmlStreamReader.html">QXmlStreamReader</a>. The constructor takes <tt>treeWidget</tt> as a parameter and the class has Xbel specific functions: <pre class="snippet">
    XbelReader(QTreeWidget *treeWidget);
...
    void readUnknownElement();
    void readXBEL();
    void readTitle(QTreeWidgetItem *item);
    void readSeparator(QTreeWidgetItem *item);
    void readFolder(QTreeWidgetItem *item);
    void readBookmark(QTreeWidgetItem *item);

    QTreeWidgetItem *createChildItem(QTreeWidgetItem *item);

    QTreeWidget *treeWidget;
...</pre> The <tt>read()</tt> function accepts a <a href="../../../com/trolltech/qt/core/QIODevice.html">QIODevice</a> and sets it with <a href="../../../com/trolltech/qt/xml/QXmlStreamReader.html#setDevice(com.trolltech.qt.core.QIODevice)">setDevice()</a>. The <a href="../../../com/trolltech/qt/xml/QXmlStreamReader.html#raiseError()">raiseError()</a> function is used to display a custom error message, inidicating that the file's version is incorrect.<br><br>The following code example is written in c++.<br> <pre class="snippet">
bool XbelReader::read(QIODevice *device)
{
    setDevice(device);

    while (!atEnd()) {
        readNext();

        if (isStartElement()) {
            if (name() == "xbel" && attributes().value("version") == "1.0")
                readXBEL();
            else
                raiseError(QObject::tr("The file is not an XBEL version 1.0 file."));
        }
    }

    return !error();
}
</pre> The pendent to <a href="../../../com/trolltech/qt/xml/QXmlStreamReader.html">QXmlStreamReader</a> is <a href="../../../com/trolltech/qt/xml/QXmlStreamWriter.html">QXmlStreamWriter</a>, which provides an XML writer with a simple streaming API. <a href="../../../com/trolltech/qt/xml/QXmlStreamWriter.html">QXmlStreamWriter</a> operates on a <a href="../../../com/trolltech/qt/core/QIODevice.html">QIODevice</a> and has specialised functions for all XML tokens or events you want to write, such as <a href="../../../com/trolltech/qt/xml/QXmlStreamWriter.html#writeDTD(java.lang.String)">writeDTD()</a>, <a href="../../../com/trolltech/qt/xml/QXmlStreamWriter.html#writeCharacters(java.lang.String)">writeCharacters()</a>, <a href="../../../com/trolltech/qt/xml/QXmlStreamWriter.html#writeComment(java.lang.String)">writeComment()</a> and so on. <p>To write XML document with <a href="../../../com/trolltech/qt/xml/QXmlStreamWriter.html">QXmlStreamWriter</a>, you start a document with the <a href="../../../com/trolltech/qt/xml/QXmlStreamWriter.html#writeStartDocument()">writeStartDocument()</a> function and end it with <a href="../../../com/trolltech/qt/xml/QXmlStreamWriter.html#writeEndDocument()">writeEndDocument()</a>, which implicitly closes all remaining open tags. Element tags are opened with <a href="../../../com/trolltech/qt/xml/QXmlStreamWriter.html#writeStartDocument()">writeStartDocument()</a> and followed by <a href="../../../com/trolltech/qt/xml/QXmlStreamWriter.html#writeAttribute(java.lang.String, java.lang.String, java.lang.String)">writeAttribute()</a> or <a href="../../../com/trolltech/qt/xml/QXmlStreamWriter.html#writeAttributes(com.trolltech.qt.xml.QXmlStreamAttributes)">writeAttributes()</a>, element content, and then <a href="../../../com/trolltech/qt/xml/QXmlStreamWriter.html#writeEndDocument()">writeEndDocument()</a>. Also, <a href="../../../com/trolltech/qt/xml/QXmlStreamWriter.html#writeEmptyElement(java.lang.String, java.lang.String)">writeEmptyElement()</a> can be used to write empty elements. <p>Element content comprises characters, entity references or nested elements. Content can be written with <a href="../../../com/trolltech/qt/xml/QXmlStreamWriter.html#writeCharacters(java.lang.String)">writeCharacters()</a>, a function that also takes care of escaping all forbidden characters and character sequences, <a href="../../../com/trolltech/qt/xml/QXmlStreamWriter.html#writeEntityReference(java.lang.String)">writeEntityReference()</a>, or subsequent calls to <a href="../../../com/trolltech/qt/xml/QXmlStreamWriter.html#writeStartElement(java.lang.String, java.lang.String)">writeStartElement()</a>. <p>The <tt>XbelWriter</tt> class from <a href="xml-streambookmarks.html">QXmlStream Bookmarks Example</a> is a subclass of <a href="../../../com/trolltech/qt/xml/QXmlStreamWriter.html">QXmlStreamWriter</a>. Its <tt>writeFile()</tt> function illustrates the core functions of <a href="../../../com/trolltech/qt/xml/QXmlStreamWriter.html">QXmlStreamWriter</a> mentioned above:<br><br>The following code example is written in c++.<br> <pre class="snippet">
bool XbelWriter::writeFile(QIODevice *device)
{
    setDevice(device);

    writeStartDocument();
    writeDTD("&lt;!DOCTYPE xbel&gt;");
    writeStartElement("xbel");
    writeAttribute("version", "1.0");
    for (int i = 0; i &lt; treeWidget-&gt;topLevelItemCount(); ++i)
        writeItem(treeWidget-&gt;topLevelItem(i));

    writeEndDocument();
    return true;
}
</pre><a name="the-qt-sax2-classes"><h2>The Qt SAX2 Classes</h2><a name="introduction-to-sax2"><h3>Introduction to SAX2</h3> The SAX2 interface is an event-driven mechanism to provide the user with document information. An "event" in this context means something reported by the parser, for example, it has encountered a start tag, or an end tag, etc. <p>To make it less abstract consider the following example: <pre class="snippet">
&lt;quote&gt;A quotation.&lt;/quote&gt;
</pre> Whilst reading (a SAX2 parser is usually referred to as "reader") the above document three events would be triggered: <ol><li> A start tag occurs (<tt>&lt;quote&gt;</tt>).</li><li> Character data (i.e. text) is found, "A quotation.".</li><li> An end tag is parsed (<tt>&lt;/quote&gt;</tt>).</li></ol> Each time such an event occurs the parser reports it; you can set up event handlers to respond to these events. <p>Whilst this is a fast and simple approach to read XML documents, manipulation is difficult because data is not stored, simply handled and discarded serially. The <a href="qtxml.html#dom">DOM interface</a> reads in and stores the whole document in a tree structure; this takes more memory, but makes it easier to manipulate the document's structure.. <p>The Qt XML module provides an abstract class, <a href="../../../com/trolltech/qt/xml/QXmlReader.html">QXmlReader</a>, that defines the interface for potential SAX2 readers. Qt includes a reader implementation, <a href="../../../com/trolltech/qt/xml/QXmlSimpleReader.html">QXmlSimpleReader</a>, that is easy to adapt through subclassing. <p>The reader reports parsing events through special handler classes: <table align="center" border="0" cellpadding="2" cellspacing="1"><thead><tr class="qt-style" valign="top"><th><center> Handler class</center></th><th><center> Description</center></th></tr></thead><tr valign="top" class="even"><td> <a href="../../../com/trolltech/qt/xml/QXmlContentHandler.html">QXmlContentHandler</a></td><td> Reports events related to the content of a document (e.g. the start tag or characters).</td></tr><tr valign="top" class="odd"><td> <a href="../../../com/trolltech/qt/xml/QXmlDTDHandler.html">QXmlDTDHandler</a></td><td> Reports events related to the DTD (e.g. notation declarations).</td></tr><tr valign="top" class="even"><td> <a href="../../../com/trolltech/qt/xml/QXmlErrorHandler.html">QXmlErrorHandler</a></td><td> Reports errors or warnings that occurred during parsing.</td></tr><tr valign="top" class="odd"><td> <a href="../../../com/trolltech/qt/xml/QXmlEntityResolver.html">QXmlEntityResolver</a></td><td> Reports external entities during parsing and allows users to resolve external entities themselves instead of leaving it to the reader.</td></tr><tr valign="top" class="even"><td> <a href="../../../com/trolltech/qt/xml/QXmlDeclHandler.html">QXmlDeclHandler</a></td><td> Reports further DTD related events (e.g. attribute declarations).</td></tr><tr valign="top" class="odd"><td> <a href="../../../com/trolltech/qt/xml/QXmlLexicalHandler.html">QXmlLexicalHandler</a></td><td> Reports events related to the lexical structure of the document (the beginning of the DTD, comments etc.).</td></tr></table> These classes are abstract classes describing the interface. The <a href="../../../com/trolltech/qt/xml/QXmlDefaultHandler.html">QXmlDefaultHandler</a> class provides a "do nothing" default implementation for all of them. Therefore users only need to overload the <a href="../../../com/trolltech/qt/xml/QXmlDefaultHandler.html">QXmlDefaultHandler</a> functions they are interested in. <p>To read input XML data a special class <a href="../../../com/trolltech/qt/xml/QXmlInputSource.html">QXmlInputSource</a> is used. <p>Apart from those already mentioned, the following SAX2 support classes provide additional useful functionality: <table align="center" border="0" cellpadding="2" cellspacing="1"><thead><tr class="qt-style" valign="top"><th><center> Class</center></th><th><center> Description</center></th></tr></thead><tr valign="top" class="even"><td> <a href="../../../com/trolltech/qt/xml/QXmlAttributes.html">QXmlAttributes</a></td><td> Used to pass attributes in a start element event.</td></tr><tr valign="top" class="odd"><td> <a href="../../../com/trolltech/qt/xml/QXmlLocator.html">QXmlLocator</a></td><td> Used to obtain the actual parsing position of an event.</td></tr><tr valign="top" class="even"><td> <a href="../../../com/trolltech/qt/xml/QXmlNamespaceSupport.html">QXmlNamespaceSupport</a></td><td> Used to implement namespace support for a reader. Note that namespaces do not change the parsing behavior. They are only reported through the handler.</td></tr></table> The <a href="xml-saxbookmarks.html">SAX Bookmarks example</a> illustrates how to subclass <a href="../../../com/trolltech/qt/xml/QXmlDefaultHandler.html">QXmlDefaultHandler</a> to read an XML bookmark file (XBEL) and how to generate XML by hand.<a name="sax2-features"><h3>SAX2 Features</h3> The behavior of an XML reader depends on its support for certain optional features. For example, a reader may have the feature "report attributes used for namespace declarations and prefixes along with the local name of a tag". Like every other feature this has a unique name represented by a URI: it is called http://xml.org/sax/features/namespace-prefixes. <p>The Qt SAX2 implementation can report whether the reader has particular functionality using the <a href="../../../com/trolltech/qt/xml/QXmlReader.html#hasFeature(java.lang.String)">QXmlReader::hasFeature()</a> function. Available features can be tested with <a href="../../../com/trolltech/qt/xml/QXmlReader.html#feature(java.lang.String)">QXmlReader::feature()</a>, and switched on or off using <a href="../../../com/trolltech/qt/xml/QXmlReader.html#setFeature(java.lang.String, boolean)">QXmlReader::setFeature()</a>. <p>Consider the example <pre class="snippet">
&lt;document xmlns:book = 'http://qtsoftware.com/fnord/book/'
          xmlns      = 'http://qtsoftware.com/fnord/' &gt;
</pre> A reader that does not support the http://xml.org/sax/features/namespace-prefixes feature would report the element name document but not its attributes xmlns:book and xmlns with their values. A reader with the feature http://xml.org/sax/features/namespace-prefixes reports the namespace attributes if the <a href="../../../com/trolltech/qt/xml/QXmlReader.html#feature(java.lang.String)">feature</a> is switched on. <p>Other features include http://xml.org/sax/features/namespace (namespace processing, implies http://xml.org/sax/features/namespace-prefixes) and http://xml.org/sax/features/validation (the ability to report validation errors). <p>Whilst SAX2 leaves it to the user to define and implement whatever features are required, support for http://xml.org/sax/features/namespace (and thus http://xml.org/sax/features/namespace-prefixes) is mandantory. The <a href="../../../com/trolltech/qt/xml/QXmlSimpleReader.html">QXmlSimpleReader</a> implementation of <a href="../../../com/trolltech/qt/xml/QXmlReader.html">QXmlReader</a>, supports them, and can do namespace processing. <p><a href="../../../com/trolltech/qt/xml/QXmlSimpleReader.html">QXmlSimpleReader</a> is not validating, so it does not support http://xml.org/sax/features/validation.<a name="namespace-support-via-features"><h3>Namespace Support via Features</h3> As we have seen in the previous section, we can configure the behavior of the reader when it comes to namespace processing. This is done by setting and unsetting the http://xml.org/sax/features/namespaces and http://xml.org/sax/features/namespace-prefixes features. <p>They influence the reporting behavior in the following way: <ol><li> Namespace prefixes and local parts of elements and attributes can be reported.</li><li> The qualified names of elements and attributes are reported.</li><li> <a href="../../../com/trolltech/qt/xml/QXmlContentHandler.html#startPrefixMapping(java.lang.String, java.lang.String)">QXmlContentHandler::startPrefixMapping()</a> and <a href="../../../com/trolltech/qt/xml/QXmlContentHandler.html#endPrefixMapping(java.lang.String)">QXmlContentHandler::endPrefixMapping()</a> are called by the reader.</li><li> Attributes that declare namespaces (i.e. the attribute xmlns and attributes starting with xmlns:) are reported.</li></ol> Consider the following element: <pre class="snippet">
&lt;author xmlns:fnord = 'http://qtsoftware.com/fnord/'
             title="Ms" 
             fnord:title="Goddess" 
             name="Eris Kallisti"/&gt;
</pre> With http://xml.org/sax/features/namespace-prefixes set to true the reader will report four attributes; but with the namespace-prefixes feature set to false only three, with the xmlns:fnord attribute defining a namespace being "invisible" to the reader. <p>The http://xml.org/sax/features/namespaces feature is responsible for reporting local names, namespace prefixes and URIs. With http://xml.org/sax/features/namespaces set to true the parser will report title as the local name of the fnord:title attribute, fnord being the namespace prefix and http://qtsoftware.com/fnord/ as the namespace URI. When http://xml.org/sax/features/namespaces is false none of them are reported. <p>In the current implementation the Qt XML classes follow the definition that the prefix xmlns itself isn't associated with any namespace at all (see http://www.w3.org/TR/1999/REC-xml-names-19990114/#ns-using). Therefore even with http://xml.org/sax/features/namespaces and http://xml.org/sax/features/namespace-prefixes both set to true the reader won't return either a local name, a namespace prefix or a namespace URI for xmlns:fnord. <p>This might be changed in the future following the W3C suggestion http://www.w3.org/2000/xmlns/ to associate xmlns with the namespace http://www.w3.org/2000/xmlns. <p>As the SAX2 standard suggests, <a href="../../../com/trolltech/qt/xml/QXmlSimpleReader.html">QXmlSimpleReader</a> defaults to having http://xml.org/sax/features/namespaces set to true and http://xml.org/sax/features/namespace-prefixes set to false. When changing this behavior using <a href="../../../com/trolltech/qt/xml/QXmlSimpleReader.html#setFeature(java.lang.String, boolean)">QXmlSimpleReader::setFeature()</a> note that the combination of both features set to false is illegal.<a name="summary"><h4>Summary</h4> <a href="../../../com/trolltech/qt/xml/QXmlSimpleReader.html">QXmlSimpleReader</a> implements the following behavior: <table align="center" border="0" cellpadding="2" cellspacing="1"><thead><tr class="qt-style" valign="top"><th><center> (namespaces, namespace-prefixes)</center></th><th><center> Namespace prefix and local part</center></th><th><center> Qualified names</center></th><th><center> Prefix mapping</center></th><th><center> xmlns attributes</center></th></tr></thead><tr valign="top" class="even"><td> (true, false)</td><td> Yes</td><td> Yes*</td><td> Yes</td><td> No</td></tr><tr valign="top" class="odd"><td> (true, true)</td><td> Yes</td><td> Yes</td><td> Yes</td><td> Yes</td></tr><tr valign="top" class="even"><td> (false, true)</td><td> No*</td><td> Yes</td><td> No*</td><td> Yes</td></tr><tr valign="top" class="odd"><td> (false, false)</td><td colspan=4> Illegal</td></tr></table> The behavior of the entries marked with an asterisk (*) is not specified by SAX.<a name="properties"><h3>Properties</h3> Properties are a more general concept. They have a unique name, represented as an URI, but their value is <tt>void*</tt>. Thus nearly anything can be used as a property value. This concept involves some danger, though: there is no means of ensuring type-safety; the user must take care that they pass the right type. Properties are useful if a reader supports special handler classes. <p>The URIs used for features and properties often look like URLs, e.g. <tt>http://xml.org/sax/features/namespace</tt>. This does not mean that the data required is at this address. It is simply a way of defining unique names. <p>Anyone can define and use new SAX2 properties for their readers. Property support is not mandatory. <p>To set or query properties the following functions are provided: QXmlReader::setProperty(), QXmlReader::property() and <a href="../../../com/trolltech/qt/xml/QXmlReader.html#hasProperty(java.lang.String)">QXmlReader::hasProperty()</a>.<a name="dom"><a name="the-qt-dom-classes"><h2>The Qt DOM Classes</h2><a name="domintro"><a name="introduction-to-dom"><h3>Introduction to DOM</h3> DOM provides an interface to access and change the content and structure of an XML file. It makes a hierarchical view of the document (a tree view). Thus -- in contrast to the SAX2 interface -- an object model of the document is resident in memory after parsing which makes manipulation easy. <p>All DOM nodes in the document tree are subclasses of <a href="../../../com/trolltech/qt/xml/QDomNode.html">QDomNode</a>. The document itself is represented as a <a href="../../../com/trolltech/qt/xml/QDomDocument.html">QDomDocument</a> object. <p>Here are the available node classes and their potential child classes: <ul><li> <a href="../../../com/trolltech/qt/xml/QDomDocument.html">QDomDocument</a>: Possible children are <ul><li> <a href="../../../com/trolltech/qt/xml/QDomElement.html">QDomElement</a> (at most one)</li><li> <a href="../../../com/trolltech/qt/xml/QDomProcessingInstruction.html">QDomProcessingInstruction</a></li><li> <a href="../../../com/trolltech/qt/xml/QDomComment.html">QDomComment</a></li><li> <a href="../../../com/trolltech/qt/xml/QDomDocumentType.html">QDomDocumentType</a></li></ul></li><li> <a href="../../../com/trolltech/qt/xml/QDomDocumentFragment.html">QDomDocumentFragment</a>: Possible children are <ul><li> <a href="../../../com/trolltech/qt/xml/QDomElement.html">QDomElement</a></li><li> <a href="../../../com/trolltech/qt/xml/QDomProcessingInstruction.html">QDomProcessingInstruction</a></li><li> <a href="../../../com/trolltech/qt/xml/QDomComment.html">QDomComment</a></li><li> <a href="../../../com/trolltech/qt/xml/QDomText.html">QDomText</a></li><li> <a href="../../../com/trolltech/qt/xml/QDomCDATASection.html">QDomCDATASection</a></li><li> <a href="../../../com/trolltech/qt/xml/QDomEntityReference.html">QDomEntityReference</a></li></ul></li><li> <a href="../../../com/trolltech/qt/xml/QDomDocumentType.html">QDomDocumentType</a>: No children</li><li> <a href="../../../com/trolltech/qt/xml/QDomEntityReference.html">QDomEntityReference</a>: Possible children are <ul><li> <a href="../../../com/trolltech/qt/xml/QDomElement.html">QDomElement</a></li><li> <a href="../../../com/trolltech/qt/xml/QDomProcessingInstruction.html">QDomProcessingInstruction</a></li><li> <a href="../../../com/trolltech/qt/xml/QDomComment.html">QDomComment</a></li><li> <a href="../../../com/trolltech/qt/xml/QDomText.html">QDomText</a></li><li> <a href="../../../com/trolltech/qt/xml/QDomCDATASection.html">QDomCDATASection</a></li><li> <a href="../../../com/trolltech/qt/xml/QDomEntityReference.html">QDomEntityReference</a></li></ul></li><li> <a href="../../../com/trolltech/qt/xml/QDomElement.html">QDomElement</a>: Possible children are <ul><li> <a href="../../../com/trolltech/qt/xml/QDomElement.html">QDomElement</a></li><li> <a href="../../../com/trolltech/qt/xml/QDomText.html">QDomText</a></li><li> <a href="../../../com/trolltech/qt/xml/QDomComment.html">QDomComment</a></li><li> <a href="../../../com/trolltech/qt/xml/QDomProcessingInstruction.html">QDomProcessingInstruction</a></li><li> <a href="../../../com/trolltech/qt/xml/QDomCDATASection.html">QDomCDATASection</a></li><li> <a href="../../../com/trolltech/qt/xml/QDomEntityReference.html">QDomEntityReference</a></li></ul></li><li> <a href="../../../com/trolltech/qt/xml/QDomAttr.html">QDomAttr</a>: Possible children are <ul><li> <a href="../../../com/trolltech/qt/xml/QDomText.html">QDomText</a></li><li> <a href="../../../com/trolltech/qt/xml/QDomEntityReference.html">QDomEntityReference</a></li></ul></li><li> <a href="../../../com/trolltech/qt/xml/QDomProcessingInstruction.html">QDomProcessingInstruction</a>: No children</li><li> <a href="../../../com/trolltech/qt/xml/QDomComment.html">QDomComment</a>: No children</li><li> <a href="../../../com/trolltech/qt/xml/QDomText.html">QDomText</a>: No children</li><li> <a href="../../../com/trolltech/qt/xml/QDomCDATASection.html">QDomCDATASection</a>: No children</li><li> <a href="../../../com/trolltech/qt/xml/QDomEntity.html">QDomEntity</a>: Possible children are <ul><li> <a href="../../../com/trolltech/qt/xml/QDomElement.html">QDomElement</a></li><li> <a href="../../../com/trolltech/qt/xml/QDomProcessingInstruction.html">QDomProcessingInstruction</a></li><li> <a href="../../../com/trolltech/qt/xml/QDomComment.html">QDomComment</a></li><li> <a href="../../../com/trolltech/qt/xml/QDomText.html">QDomText</a></li><li> <a href="../../../com/trolltech/qt/xml/QDomCDATASection.html">QDomCDATASection</a></li><li> <a href="../../../com/trolltech/qt/xml/QDomEntityReference.html">QDomEntityReference</a></li></ul></li><li> <a href="../../../com/trolltech/qt/xml/QDomNotation.html">QDomNotation</a>: No children</li></ul> With <a href="../../../com/trolltech/qt/xml/QDomNodeList.html">QDomNodeList</a> and <a href="../../../com/trolltech/qt/xml/QDomNamedNodeMap.html">QDomNamedNodeMap</a> two collection classes are provided: <a href="../../../com/trolltech/qt/xml/QDomNodeList.html">QDomNodeList</a> is a list of nodes, and <a href="../../../com/trolltech/qt/xml/QDomNamedNodeMap.html">QDomNamedNodeMap</a> is used to handle unordered sets of nodes (often used for attributes). <p>The <a href="../../../com/trolltech/qt/xml/QDomImplementation.html">QDomImplementation</a> class allows the user to query features of the DOM implementation. <p>To get started please refer to the <a href="../../../com/trolltech/qt/xml/QDomDocument.html">QDomDocument</a> documentation. You might also want to take a look at the <a href="qtjambi-dombookmarks.html">DOM Bookmarks example</a>, which illustrates how to read and write an XML bookmark file (XBEL) using DOM.<a name="namespaces"><a name="an-introduction-to-namespaces"><h2>An Introduction to Namespaces</h2> Parts of the Qt XML module documentation assume that you are familiar with XML namespaces. Here we present a brief introduction; skip to <a href="qtxml.html#namespacesconventions">Qt XML documentation conventions</a> if you already know this material. <p>Namespaces are a concept introduced into XML to allow a more modular design. With their help data processing software can easily resolve naming conflicts in XML documents. <p>Consider the following example: <pre class="snippet">
&lt;document&gt;
&lt;book&gt;
  &lt;title&gt;Practical XML&lt;/title&gt;
  &lt;author title="Ms" name="Eris Kallisti"/&gt;
  &lt;chapter&gt;
    &lt;title&gt;A Namespace Called fnord&lt;/title&gt;
  &lt;/chapter&gt;
&lt;/book&gt;
&lt;/document&gt;
</pre> Here we find three different uses of the name title. If you wish to process this document you will encounter problems because each of the titles should be displayed in a different manner -- even though they have the same name. <p>The solution would be to have some means of identifying the first occurrence of title as the title of a book, i.e. to use the title element of a book namespace to distinguish it from, for example, the chapter title, e.g.: <pre class="snippet">
&lt;book:title&gt;Practical XML&lt;/book:title&gt;
</pre> book in this case is a prefix denoting the namespace. <p>Before we can apply a namespace to element or attribute names we must declare it. <p>Namespaces are URIs like http://qtsoftware.com/fnord/book/. This does not mean that data must be available at this address; the URI is simply used to provide a unique name. <p>We declare namespaces in the same way as attributes; strictly speaking they are attributes. To make for example http://qtsoftware.com/fnord/ the document's default XML namespace xmlns we write <pre class="snippet">
xmlns="http://qtsoftware.com/fnord/"
</pre> To distinguish the http://qtsoftware.com/fnord/book/ namespace from the default, we must supply it with a prefix: <pre class="snippet">
xmlns:book="http://qtsoftware.com/fnord/book/"
</pre> A namespace that is declared like this can be applied to element and attribute names by prepending the appropriate prefix and a ":" delimiter. We have already seen this with the book:title element. <p>Element names without a prefix belong to the default namespace. This rule does not apply to attributes: an attribute without a prefix does not belong to any of the declared XML namespaces at all. Attributes always belong to the "traditional" namespace of the element in which they appear. A "traditional" namespace is not an XML namespace, it simply means that all attribute names belonging to one element must be different. Later we will see how to assign an XML namespace to an attribute. <p>Due to the fact that attributes without prefixes are not in any XML namespace there is no collision between the attribute title (that belongs to the author element) and for example the title element within a chapter. <p>Let's clarify this with an example: <pre class="snippet">
&lt;document xmlns:book = 'http://qtsoftware.com/fnord/book/'
          xmlns      = 'http://qtsoftware.com/fnord/' &gt;
&lt;book&gt;
  &lt;book:title&gt;Practical XML&lt;/book:title&gt;
  &lt;book:author xmlns:fnord = 'http://qtsoftware.com/fnord/'
               title="Ms"
               fnord:title="Goddess"
               name="Eris Kallisti"/&gt;
  &lt;chapter&gt;
    &lt;title&gt;A Namespace Called fnord&lt;/title&gt;
  &lt;/chapter&gt;
&lt;/book&gt;
&lt;/document&gt;
</pre> Within the document element we have two namespaces declared. The default namespace http://qtsoftware.com/fnord/ applies to the book element, the chapter element, the appropriate title element and of course to document itself. <p>The book:author and book:title elements belong to the namespace with the URI http://qtsoftware.com/fnord/book/. <p>The two book:author attributes title and name have no XML namespace assigned. They are only members of the "traditional" namespace of the element book:author, meaning that for example two title attributes in book:author are forbidden. <p>In the above example we circumvent the last rule by adding a title attribute from the http://qtsoftware.com/fnord/ namespace to book:author: the fnord:title comes from the namespace with the prefix fnord that is declared in the book:author element. <p>Clearly the fnord namespace has the same namespace URI as the default namespace. So why didn't we simply use the default namespace we'd already declared? The answer is quite complex: <ul><li> attributes without a prefix don't belong to any XML namespace at all, not even to the default namespace;</li><li> additionally omitting the prefix would lead to a title-title clash;</li><li> writing it as xmlns:title would declare a new namespace with the prefix title instead of applying the default xmlns namespace.</li></ul> With the Qt XML classes elements and attributes can be accessed in two ways: either by refering to their qualified names consisting of the namespace prefix and the "real" name (or local name) or by the combination of local name and namespace URI. <p>More information on XML namespaces can be found at http://www.w3.org/TR/REC-xml-names/.<a name="namespacesconventions"><a name="conventions-used-in-the-qt-xml-documentation"><h3>Conventions Used in the Qt XML Documentation</h3> The following terms are used to distinguish the parts of names within the context of namespaces: <ul><li> The qualified name is the name as it appears in the document. (In the above example book:title is a qualified name.)</li><li> A namespace prefix in a qualified name is the part to the left of the ":". (book is the namespace prefix in book:title.)</li><li> The local part of a name (also refered to as the local name) appears to the right of the ":". (Thus title is the local part of book:title.)</li><li> The namespace URI ("Uniform Resource Identifier") is a unique identifier for a namespace. It looks like a URL (e.g. http://qtsoftware.com/fnord/ ) but does not require data to be accessible by the given protocol at the named address.</li></ul> Elements without a ":" (like chapter in the example) do not have a namespace prefix. In this case the local part and the qualified name are identical (i.e. chapter). <p><DT><b>See also:</b><br><DD><a href="qtjambi-dombookmarks.html">DOM Bookmarks Example</a>, and <a href="xml-saxbookmarks.html">SAX Bookmarks Example</a>. <br></DD></DT><p /><address><hr /><div align="center">
 <table width="100%" cellspacing="0" border="0"><tr class="address">
 <td width="30%">Copyright &copy; 2009 Nokia Corporation and/or its subsidiary(-ies)</td>
 <td width="40%" align="center"><a href="trademarks.html">Trademarks</a></td>
 <td width="30%" align="right"><div align="right">Qt Jambi 4.5.2_01</div></td>
 </tr></table></div></address></body></html>
